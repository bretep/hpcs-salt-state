node:
  master: {{ master }}
  data: {{ data }}

path:
  conf: /etc/elasticsearch
  data: /mnt/elasticsearch
  logs: /var/log/elasticsearch

index:
  number_of_shards: {{ pillar['elasticsearch']['shards'] }}
  number_of_replicas: {{ pillar['elasticsearch']['replicas'] }}
  query.default_field: "@message"
  refresh_interval: 5s
  store:
    compress:
      stored: true
      tv: true
    throttle:
      type: merge
      max_bytes_per_sec: 3mb

network.publish_host: {{ pillar['elasticsearch']['publish'][grains['host']] }}

discovery.zen:
  minimum_master_nodes: 1
  ping:
    multicast.enabled: false
    unicast.hosts:
{%- for host in pillar['elasticsearch']['masters'] %}
      - {{ host }}
{%- endfor %}
